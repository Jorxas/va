<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will you be my Valentine?</title>
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
        }

        #container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            padding: 2rem;
        }

        .bear-image {
            max-width: 300px;
            width: 100%;
            height: auto;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            color: #000;
            margin: 0;
        }

        .heart-arrow {
            display: inline-block;
            font-size: 2rem;
            margin-left: 0.5rem;
        }

        .buttons {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            position: relative;
            min-height: 50px;
            width: 100%;
        }

        button {
            padding: 12px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, opacity 0.2s;
            font-weight: 600;
            color: white;
        }

        button:hover {
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        #btn-oui {
            background-color: #4CAF50;
        }

        #btn-oui:hover {
            background-color: #45a049;
        }

        #btn-non {
            background-color: #f44336;
            position: relative;
        }

        #btn-non:hover {
            background-color: #da190b;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .bear-image {
                max-width: 250px;
            }

            button {
                padding: 10px 25px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>

<div id="container">
    <div id="content">
        <img class="bear-image" src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnhvNWxvbmo4d2tvcXd6eXdzZnoyZmx1bWF6cWRoMmw4ZzdkZTVqMSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/owRQ9sDRJY3PAxacUD/giphy.gif" alt="Valentine GIF">
        <h1>Will you be my Valentine?<span class="heart-arrow">üíò</span></h1>
        <div class="buttons">
            <button id="btn-oui">Yes</button>
            <button id="btn-non">No</button>
        </div>
    </div>
</div>

<script>
    const btnNon = document.getElementById('btn-non');
    const btnOui = document.getElementById('btn-oui');
    const content = document.getElementById('content');

    // Compteur de tentatives sur le bouton "No"
    let noButtonAttempts = 0;

    // Configuration EmailJS - REMPLACEZ CES VALEURS PAR LES V√îTRES
    // 1. Cr√©ez un compte gratuit sur https://www.emailjs.com/
    // 2. Cr√©ez un service email (Gmail, Outlook, etc.)
    // 3. Cr√©ez un template d'email
    // 4. Remplacez les valeurs ci-dessous :
    const EMAILJS_SERVICE_ID = 'service_zsf5udk'; // ‚úÖ Service ID configur√©
    const EMAILJS_TEMPLATE_ID = 'template_o7x83s7'; // ‚úÖ Template ID configur√©
    const EMAILJS_PUBLIC_KEY = 'apIUUvhLzrwa60FGh'; // ‚úÖ Public Key configur√©e
    const YOUR_EMAIL = 'pokemtezo5@gmail.com'; // ‚úÖ Email configur√©

    // Initialiser EmailJS
    (function() {
        emailjs.init(EMAILJS_PUBLIC_KEY);
    })();

    // Fonction pour envoyer un email
    function sendEmail(action, attempts) {
        // Ne pas envoyer si les valeurs ne sont pas configur√©es
        if (EMAILJS_SERVICE_ID === 'YOUR_SERVICE_ID' || 
            EMAILJS_TEMPLATE_ID === 'YOUR_TEMPLATE_ID' || 
            EMAILJS_PUBLIC_KEY === 'YOUR_PUBLIC_KEY') {
            console.log('EmailJS non configur√©. Veuillez configurer les identifiants.');
            return;
        }

        const templateParams = {
            to_email: YOUR_EMAIL,
            action: action, // 'yes_clicked' ou 'no_attempts'
            attempts: attempts,
            timestamp: new Date().toLocaleString('fr-FR'),
            user_agent: navigator.userAgent,
            screen_size: `${window.innerWidth}x${window.innerHeight}`
        };

        emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams)
            .then(function(response) {
                console.log('Email envoy√© avec succ√®s!', response.status, response.text);
            }, function(error) {
                console.log('Erreur lors de l\'envoi de l\'email:', error);
            });
    }

    // Position initiale du bouton No (pas n√©cessaire maintenant qu'il est en position relative)
    function setInitialPosition() {
        // Le bouton est maintenant align√© normalement avec flexbox
    }

    // Variable pour √©viter les appels multiples simultan√©s
    let isMoving = false;
    let lastMoveTime = 0;
    const moveCooldown = 50; // D√©lai minimum entre les mouvements (ms)

    // Fonction pour faire fuir le bouton No
    function makeButtonRunAway() {
        // Emp√™cher les appels multiples simultan√©s
        const now = Date.now();
        if (isMoving || (now - lastMoveTime) < moveCooldown) {
            return;
        }
        
        // Incr√©menter le compteur de tentatives
        noButtonAttempts++;
        
        isMoving = true;
        lastMoveTime = now;
        
        const maxX = window.innerWidth - btnNon.offsetWidth - 20;
        const maxY = window.innerHeight - btnNon.offsetHeight - 20;
        const minX = 20;
        const minY = 20;
        
        // R√©cup√©rer la position actuelle
        const rect = btnNon.getBoundingClientRect();
        const currentX = rect.left;
        const currentY = rect.top;
        
        let x, y;
        let attempts = 0;
        const minDistance = 100; // Distance minimale de d√©placement
        
        // S'assurer que la nouvelle position est suffisamment √©loign√©e
        do {
            x = Math.random() * (maxX - minX) + minX;
            y = Math.random() * (maxY - minY) + minY;
            attempts++;
            
            // Calculer la distance
            const distance = Math.sqrt(Math.pow(x - currentX, 2) + Math.pow(y - currentY, 2));
            
            // Si la distance est suffisante ou si on a essay√© 10 fois, on prend cette position
            if (distance >= minDistance || attempts >= 10) {
                break;
            }
        } while (attempts < 10);
        
        // D√©sactiver la transition pour un mouvement instantan√©
        btnNon.style.transition = 'none';
        btnNon.style.left = x + 'px';
        btnNon.style.top = y + 'px';
        btnNon.style.position = 'fixed';
        btnNon.style.zIndex = '1000';
        
        // R√©activer la transition apr√®s un court d√©lai
        setTimeout(() => {
            btnNon.style.transition = 'all 0.1s ease';
            isMoving = false;
        }, 50);
    }

    // Le bouton NO s'enfuit quand on survole (desktop uniquement)
    btnNon.addEventListener('mouseover', makeButtonRunAway);
    
    // Le bouton NO s'enfuit quand on touche (mobile uniquement)
    btnNon.addEventListener('touchstart', (e) => {
        e.preventDefault();
        makeButtonRunAway();
    }, { passive: false });

    // Le bouton YES gagne
    btnOui.addEventListener('click', () => {
        // Envoi du clic √† l'API pour compter
        fetch('https://api.countapi.xyz/hit/mon-valentin-2026/clics')
            .catch(err => console.log('API call failed:', err));

        // Envoyer un email avec les statistiques
        sendEmail('yes_clicked', noButtonAttempts);

        // Changement du contenu
        content.innerHTML = `
            <img class="bear-image" src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExbmY0b2J1ZHNxMmh5NWE1dm9rNGgxeW53aTVtdzNydGJmM2l0aXg3NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/BOPz50G5Cf2Y5XS9Ba/giphy.gif" alt="Celebration">
            <h1>Yay! I knew it! ‚ù§Ô∏è</h1>
        `;

        // Cacher le bouton No
        btnNon.style.display = 'none';
    });

    // Initialiser la position au chargement
    window.addEventListener('load', setInitialPosition);
    window.addEventListener('resize', setInitialPosition);
</script>

</body>
</html>